<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace = "com.spellhaven.rubatoHome.dao.IDao">

	<!-- freeBoard용 SQL들. IDao 인터페이스랑 함수 이름, param 순서, param 개수 잘 맞춰 쓰셈 ㅋ -->
	<insert id="fbwriteDao">
		INSERT INTO freeboard(fbnum, fbname, fbtitle, fbcontent, fbid, fbhit) VALUES (fb_seq.nextval, #{param1}, #{param2}, #{param3}, #{param4}, 0)
	</insert>

	<!-- select id = "fblistCountDao" resultType = "int"> 사실 이 함수는 필요없었다. fboardDtos.size()를 쓰면 됐네.
		SELECT count(*) FROM freeboard
	</select-->

	<update id = "fbBigHitDao">
		UPDATE freeboard SET fbhit = fbhit + 1 WHERE fbnum = #{param1}
	</update>
	
	<select id = "fbviewDao" resultType = "com.spellhaven.rubatoHome.dto.FreeBoardDto">
		SELECT * FROM freeboard WHERE fbnum = #{param1}
	</select>

	<select id="fblistDao" resultType = "com.spellhaven.rubatoHome.dto.FreeBoardDto">
		SELECT * FROM freeboard ORDER BY fbnum DESC
	</select> <!-- fbnum DESC 순으로 불러와야 최근 글부터 불러오게 된디. -->

	<select id = "fbTitleSearchListDao" resultType = "com.spellhaven.rubatoHome.dto.FreeBoardDto">
		SELECT * FROM freeboard WHERE fbtitle LIKE '%' || #{param1} || '%' ORDER BY fbnum DESC	
	</select> <!-- 와일드카드가 포함된 SQL SELECT문은 원래 이상했다... 그러나 mybatis에선 더 이상하다. -->
	
	<select id = "fbContentSearchListDao" resultType = "com.spellhaven.rubatoHome.dto.FreeBoardDto">
		SELECT * FROM freeboard WHERE fbcontent LIKE '%' || #{param1} || '%' ORDER BY fbnum DESC	
	</select> 
	
	<select id = "fbWriterSearchListDao" resultType = "com.spellhaven.rubatoHome.dto.FreeBoardDto">
		SELECT * FROM freeboard WHERE fbname LIKE '%' || #{param1} || '%' ORDER BY fbnum DESC	
	</select> 

	<delete id = "fbdeleteDao">
		DELETE FROM freeboard WHERE fbnum = #{param1}
	</delete>
	
	<insert id = "fbfileInsertDao">
		INSERT INTO fbfiles(fno, bno, filename, fileoriname, fileurl, fileextension) VALUES (fno_seq.nextval, #{param1}, #{param2}, #{param3}, #{param4}, #{param5}) 
	</insert>
	
	<select id = "fbfileInfoDao" resultType="com.spellhaven.rubatoHome.dto.FileDto">
		SELECT * FROM fbfiles WHERE bno = #{param1}
	</select>


	<!-- member용 SQL -->
	
	
	
	
	
	
	
	
	


</mapper>